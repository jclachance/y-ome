#!/usr/bin/env python3

from yome import Session
from yome.models import *

from os.path import join, realpath, dirname
import json

data_directory = realpath(join(dirname(__file__), '..', 'public', 'data'))
bundle_data_directory = realpath(join(dirname(__file__), '..', 'src', 'data'))

session = Session()

# Gene list (load in bundle)
gene_list = {
    'locusIds': [
        x[0] for x in session.query(Gene.locus_id).all()
    ]
}
with open(join(bundle_data_directory, 'index.json'), 'w') as f:
    json.dump(gene_list, f)

session.close()
